<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Unity WebGL Player | BlocksWorld</title>
	<link rel="shortcut icon" href="TemplateData/favicon.ico">
	<link rel="stylesheet" href="TemplateData/style.css">
	<script src="TemplateData/UnityProgress.js"></script>
	<script src="Build/UnityLoader.js"></script>
	<script src="TemplateData/aws-sdk-2.709.0.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
	<script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/handpose"></script>
	<script src="TemplateData/fingerpose.js" type="text/javascript"></script>
	<script src="TemplateData/fingerpose-adapter.js" type="text/javascript"></script>
	<script>
		//omit "var" so that it's global
		unityInstance = UnityLoader.instantiate("unityContainer", "Build/fox-world.json", {
			compatibilityCheck: function (unityInstance, onsuccess, onerror) {
				if (!UnityLoader.SystemInfo.hasWebGL) {
					unityInstance.popup("Your browser does not support WebGL",
						[{ text: "OK", callback: onerror }]);
				} else if (UnityLoader.SystemInfo.mobile) {
					unityInstance.popup("Please note that Unity WebGL is not currently supported on mobiles. Press OK if you wish to continue anyway.",
						[{ text: "OK", callback: onsuccess }]);
				} else if (["Edge", "Firefox", "Chrome", "Safari"].indexOf(UnityLoader.SystemInfo.browser) == -1) {
					unityInstance.popup("Please note that your browser is not currently supported for this Unity WebGL content. Press OK if you wish to continue anyway.",
						[{ text: "OK", callback: onsuccess }]);
				} else {
					onsuccess();
				}
			},
			onProgress: UnityProgress,
			Module: {
				onRuntimeInitialized: startPerception,
			},
		});


	</script>
</head>
<body>
	<div class="webgl-content">
		<div id="unityContainer" style="width: 960px; height: 600px"></div>
		<div class="footer">
			<div class="webgl-logo"></div>
			<div class="fullscreen" onclick="unityInstance.SetFullscreen(1)"></div>
			<div class="title">BlocksWorld</div>
		</div>
	</div>
	<div id="audio-div" style="display: none">
		<audio id="audio-playback" crossorigin=anonymous>
			<source id="audio-source" type="audio/ogg" src="">
		</audio>
	</div>
	<div id="video-container">
		<video id="pose-video" class="layer" playsinline></video>
		<canvas id="pose-canvas" class="layer"></canvas>
		<div id="pose-result" class="layer"></div>
	</div>
</body>
</html>
